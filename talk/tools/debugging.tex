\subsection[gdb]{Debugging}

\begin{frame}[fragile]
  \frametitle{Debugging}
  \begin{alertblock}{The problem}
    \begin{itemize}
      \item everything compiles fine (no warning)
      \item but crashes at run time
      \item no error message, no clue
    \end{itemize}
  \end{alertblock}
  \pause
  \begin{block}{The solution: debuggers}
    \begin{itemize}
    \item dedicated program able to stop execution at any time
    \item and show you where you are and what you have
    \end{itemize}
  \end{block}
  \pause
  \begin{block}{Existing tools}
    \begin{description}
    \item[\href{http://www.sourceware.org/gdb/}{\beamergotobutton{gdb}}]
      THE main player
    \item[\href{http://lldb.llvm.org/}{\beamergotobutton{lldb}}]
      the debugger coming with clang/LLVM
    \item[\href{https://www.intel.com/content/www/us/en/develop/documentation/get-started-with-debugging-dpcpp-linux/top.html}{\beamergotobutton{gdb-oneapi}}]
      the Intel OneAPI debugger
    \end{description}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{gdb crash course}
  \begin{block}{start gdb}
    \begin{itemize}
    \item gdb \textless{}program\textgreater
    \item gdb \textless{}program\textgreater \textless{}core file\textgreater
    \item gdb -{}-args \textless{}program\textgreater \textless{}program arguments\textgreater
    \end{itemize}
  \end{block}
  \begin{block}{inspect state}
    \begin{description}
    \item[bt] prints a backtrace
    \item[print \textless{}var\textgreater] prints current content of the variable
    \item[list] show code around current point
    \item[up/down] go up or down in call stack
    \end{description}
  \end{block}
  \begin{block}{breakpoints}
    \begin{description}
    \item[break \textless{}function\textgreater] puts a breakpoint on function entry
    \item[break \textless{}file\textgreater:\textless{}line\textgreater] puts a breakpoint on that line
    \end{description}
  \end{block}
\end{frame}

\begin{frame}[fragile]
  \frametitle{gdb}
  \begin{exercise}{gdb}
    \begin{itemize}
    \item go to code/debug
    \item compile, run, see the crash
    \item run it in gdb (or lldb on newer MacOS)
    \item inspect backtrace, variables
    \item find problem and fix bug
    \item try stepping, breakpoints
    \item use -Wall -Wextra and see warning
    \end{itemize}
  \end{exercise}
\end{frame}

\begin{frame}[fragile]
  \frametitle{Debugging UIs}
  \begin{block}{User interfaces for debuggers}
    \begin{itemize}
      \item offer convenience on top of command line
      \item windows for variables, breakpoints, call stack, active threads, watch variables in-code, disassembly, run to cursor ...
    \end{itemize}
    \begin{description}
      \item[\href{https://code.visualstudio.com/docs/cpp/cpp-debug}{\beamergotobutton{VSCode}}]
        Built-in support for gdb
      \item[\href{https://marketplace.visualstudio.com/items?itemName=vadimcn.vscode-lldb}{\beamergotobutton{CodeLLDB}}]
        VS Code plugin for LLDB
      \item[\href{https://github.com/cyrus-and/gdb-dashboard}{\beamergotobutton{GDB dashboard}}]
        Poplar terminal UI for gdb
      \item[\href{https://github.com/hugsy/gef}{\beamergotobutton{GEF}}]
        Modern terminal UI for gdb
    \end{description}
    \begin{itemize}
      \item some editors and most IDEs have good debugger integration
    \end{itemize}
  \end{block}
\end{frame}
